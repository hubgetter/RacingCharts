<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Most Populated Countries</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* Inline critical CSS to avoid FOUC */
        body {
            background-color: #1a1a1a;
            color: white;
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .loading {
            text-align: center;
            padding: 20px;
            font-size: 18px;
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>World Most Populated Countries</h1>
            <div class="source">Data source: World Population Data</div>
        </div>
        
        <div class="configurations">
            <h2>Customize Bar Chart</h2>
            <div class="config-group">
                <label for="barColor">Bar Color:</label>
                <input type="color" id="barColor" name="barColor" value="#007bff">
            </div>
            <div class="config-group">
                <label for="barHeight">Bar Height:</label>
                <input type="range" id="barHeight" name="barHeight" min="20" max="100" value="35">
            </div>
            <div class="config-group">
                <label for="numBars">Number of Bars:</label>
                <input type="number" id="numBars" name="numBars" min="5" max="20" value="10">
            </div>
            <div class="config-group">
                <label for="growthValue">Growth Percentage:</label>
                <input type="number" id="growthValue" name="growthValue" min="0" max="100" value="5">
            </div>
            <div class="config-group">
                <label for="currentAbsolutValue">Current Absolute Value:</label>
                <input type="text" id="currentAbsolutValue" name="currentAbsolutValue" readonly>
            </div>
            <div class="config-group">
                <label for="barGrowthSpeed">Bar Growth Speed (ms):</label>
                <input type="number" id="barGrowthSpeed" name="barGrowthSpeed" min="10" step="10" value="100">
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <button id="playButton" class="control-button">Play</button>
                <div class="speed-control">
                    <label>Speed:</label>
                    <select id="speedSelect">
                        <option value="0.5">0.5x</option>
                        <option value="1" selected>1x</option>
                        <option value="2">2x</option>
                        <option value="4">4x</option>
                        <option value="8">8x</option>
                        <option value="16">16x</option>
                    </select>
                </div>
            </div>
            <div class="timeline-control">
                <input type="range" id="yearSlider" min="2000" max="2024" value="2000" step="1">
                <div class="year-display">
                    <span id="yearDisplay">2000</span>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <div id="chart">
                <div class="loading">Loading visualization...</div>
            </div>
            <div id="axis"></div>
            <div class="grid-lines"></div>
        </div>

        <div class="legend"></div>
    </div>

    <script>
        // Add error handling for script loading
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Error: ', msg, '\nURL: ', url, '\nLine:', lineNo, '\nColumn:', columnNo, '\nError object:', error);
            document.getElementById('chart').innerHTML = 'Error loading visualization. Please check console for details.';
            return false;
        };
    </script>
    <script src="script.js"></script>
</body>
</html>
